#!/usr/bin/env sh
. "$(dirname "$0")/_/husky.sh"

echo "ğŸš€ Running pre-commit checks..."
echo "ğŸ’¡ Tip: Use 'HUSKY=0 git commit' to bypass if needed"

# Run quality-check on staged TypeScript/JavaScript files
node packages/quality-check/dist/index.js --pre-commit

# If quality-check passes, run prettier on other files
if [ $? -eq 0 ]; then
  pnpm exec lint-staged
fi

if [ $? -eq 0 ]; then
  echo "âœ… Pre-commit checks passed!"
else
  echo "âŒ Pre-commit checks failed"
  echo "ğŸ”§ Fix issues above or bypass with: HUSKY=0 git commit -m 'your message'"
  exit 1
fi
